{% extends 'base.html' %}
{% load mathfilters %}
{% load i18n %}
{% load static %}
{% block content %}

<div class="container">
        <div class="row">
            <div class="col-sm-12 mx-auto">
                <div class="row">
                    {% for car in cars %}
                        {% if car.is_published %}
                        <div class="col-md-6">
                            <div class="card card-body bg-light mt-5">
                                <div class="row">
                                    <div class="col-md-6 text-left">
                                        <p><strong>{{ car.brand | upper}} {{ car.model | upper }}</strong></p>
                                    </div>
                                </div> <!-- end row -->
                                <div class="row">
                                   <div class="col-12">
                                        {% if car.photo_1 %}
                                            <img class="d-block w-100 mx-auto d-block rounded" src="{{car.photo_1.url}}" alt="Main picture" height="300" style="object-fit: cover;">
                                        {% endif %} 
                                   </div>
                                </div> <!-- end row  -->
                                <div class="row mt-4">
                                    <div class="col-2 text-center">
                                        <i class="fas fa-male">
                                        </i>
                                        {{ car.seats }}  
                                    </div>
                                    
                                    <div class="col-4 text-cneter">
                                        <i class="fas fa-car-side"></i>
                                        {{ car.get_body_type_display}}
                                    </div>
                                    <div class="col-3 text-center">
                                        <i class="fas fa-gas-pump"></i>
                                        {{ car.get_fuel_type_display}}
                                    </div>
                                    <div class="col-3 text-center">
                                        <!-- href="{% url 'car' car.id %} -->
                                        <a class="stretched-link text-secondary" data-toggle="modal" data-target="#carDetails"><i class="fas fa-info-circle"></i>  {% trans "Lisätietoja"%}</a>
                                    </div>
                                </div> <!-- end row -->
                                <div class="row mt-4">
                                    <div class="col text-center">
                                        <i class="fas fa-cogs"></i>
                                        {{ car.get_transmission_display}}
                                    </div>
                                    <div class="col text-center">
                                        <i class="fas fa-palette"></i>
                                        {{ car.get_color_display}}
                                    </div>
                                    <div class="col text-center">
                                        <i class="far fa-calendar-alt"></i>
                                        {{ car.issued_year|date:"Y" }}
                                    </div>
                                </div>
                                <div class="row mt-4">
                                    <div class="col-6 text-center border-top border-bottom py-3 text-primary">
                                        <p>{% trans "Hinta per päivä"%}</p>
                                        <h5><i class="fas fa-euro-sign"></i>{{ car.price_day }}</h5>
                                    </div>
                                    <div class="col-6 text-center border-top border-bottom border-left py-3 text-primary">
                                        <p>{% trans "Hinta per viikko"%}</p>
                                        <h5><i class="fas fa-euro-sign"></i>{{ car.price_week|mul:7 }}</h5>
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-md-6 mx-auto">
                                        <a href="{% url 'add' car.id %}" class="btn btn-secondary btn-block">{% trans "Vuokraa"%}</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Modal -->
                        <div class="modal fade" id="carDetails" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLabel">{{ car.brand}} {{ car.model }}</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        {% if car.photo_1 %}
                                            <img class="d-block w-100 mx-auto d-block mb-3" src="{{car.photo_1.url}}" alt="Main picture" height="300" style="object-fit: cover;">
                                        {% endif %} 
                                        <p>{% trans "Väri"%}: {{ car.get_color_display}} </p>
                                        <p>{% trans "Omavastuu"%}: {{ car.damage_excess}} </p>
                                        <p>{% trans "Rekisterinumero"%} : {{ car.reg_number }}</p>
                                        <p>{% trans "Päivän hinta" %}: <i class="fas fa-euro-sign"></i> {{ car.price_day }}</p>
                                        <p>{% trans "Viikkohinta" %}: <i class="fas fa-euro-sign"></i> {{ car.price_week|mul:7 }}</p>
                                        <p>{% trans "Kuukausihinta" %}: <i class="fas fa-euro-sign"></i> {{ car.price_month|mul:30 }}</p>
                                        <p>{% trans "Vuosimalli" %}: {{ car.issued_year }}</p>
                                        <p>{% trans "Käytä tarkoitusta" %}: {{ car.get_use_purpose_display }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div> <!-- end col 9 -->
        </div>    <!-- end container  -->
    </div> <!-- end container -->
{% endblock %}



